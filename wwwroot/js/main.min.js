function step1() { const e = $("meta[name='base-url']").attr("content"); document.getElementById("step1").className = "step", document.getElementById("step2").className = "step active", $.get(e + "/Home/GetServerTime", (function (e) { const t = new Date; var a = t.getFullYear() + "-" + (t.getMonth() + 1) + "-" + t.getDate() + " " + (t.getHours() + ":" + t.getMinutes() + ":" + t.getSeconds()); "0001-01-01 00:00:00" == e ? (localStorage.setItem("check_out1", a), localStorage.setItem("check_in2", a)) : (localStorage.setItem("check_out1", e), localStorage.setItem("check_in2", e)) })), window.scrollTo(0, 0) } function step2() { var e, t, a, o; const n = $("meta[name='base-url']").attr("content"); Swal.fire({ text: "Memuat..", allowOutsideClick: !1, onBeforeOpen: () => { Swal.showLoading() } }); var l = [], c = [], r = {}, s = document.getElementById("totalQuestion").value, u = document.getElementById("step2").getElementsByTagName("input"); for (i = 0; i < u.length; i++)(u[i].type = "radio") && u[i].checked && (e = u[i].value, l.push(e)); l.length == s ? (t = { answer: l.join("") }, r.answer = l.join(""), null != (a = localStorage.getItem("quiz")) ? ((o = JSON.parse(a)).push(r), localStorage.setItem("quiz", JSON.stringify(o))) : (c.push(r), localStorage.setItem("quiz", JSON.stringify(c))), $.post(n + "/Home/CheckQuiz", t, (function (e) { Swal.hideLoading(), Swal.close(), null != e.message ? ($.get(n + "/Home/GetServerTime", (function (e) { localStorage.setItem("check_out2", e), localStorage.setItem("check_in3", e) })), Swal.fire({ title: "Selamat!", icon: "success", text: "Selamat Anda telah menjawab semua pertanyaan dengan benar" }).then((() => { document.getElementById("step2").className = "step", document.getElementById("step3").className = "step active", $("[data-toggle='tooltip']").tooltip("show"), window.scrollTo(0, 0) }))) : Swal.fire({ icon: "warning", text: e.error.message }) }))) : (Swal.hideLoading(), Swal.close(), Swal.fire({ icon: "warning", text: "Mohon jawab semua pertanyaan terlebih dahulu" })) } function prevStep2() { document.getElementById("step2").className = "step", document.getElementById("step1").className = "step active", window.scrollTo(0, 0) } function cekStore() { const e = $("meta[name='base-url']").attr("content"); var t = { storeCode: document.getElementById("store-code").value }; $.get(e + "/Home/GetStoreId", t, (function (e) { 0 == e && Swal.fire({ icon: "warning", text: "Kode Toko tidak ditemukan atau belum terdaftar pada program Play&Win" }) })) } function step3() { var e; const t = $("meta[name='base-url']").attr("content"); if (e = !0, $("input").each((function () { !0 !== $(this).parsley().validate() && (e = !1) })), e) { var a = grecaptcha.getResponse(), o = { name: document.getElementById("name").value, phone: document.getElementById("phone").value, email: document.getElementById("email").value, storeCode: document.getElementById("store-code").value, info_check_in: localStorage.getItem("check_in1"), info_check_out: localStorage.getItem("check_out1"), quiz_check_in: localStorage.getItem("check_in2"), quiz_check_out: localStorage.getItem("check_out2"), check_in: localStorage.getItem("check_in3"), quiz: localStorage.getItem("quiz"), captcha: a }; Swal.fire({ text: "Memuat..", allowOutsideClick: !1, onBeforeOpen: () => { Swal.showLoading() } }), $.post(t + "/LedActivation/Hit", o, (function (e) { if (Swal.hideLoading(), Swal.close(), null != e.resource) { e.resource[0].id; var t = e.resource[0].link, a = "<a href='" + t + "'>berikut</a>", o = "<button type='button' class='swal2-confirm swal2-styled' style='display: inline-block; border-left-color: rgb(202, 0, 160); border-right-color: rgb(202, 0, 160);' onclick='window.location.reload(true);'>OK</button><button type='button' class='swal2-confirm swal2-styled' style='display: inline-block; border-left-color: rgb(202, 0, 160); border-right-color: rgb(202, 0, 160);' onclick='" + ('location.href="' + t + '";') + "'>Upload Invoice</button>"; Swal.fire({ title: "Terima kasih!", icon: "success", showConfirmButton: !1, showCancelButton: !1, html: "Partisipasi Anda pada promo Philips Play&Win telah kami terima. Upload/unggah invoice pembelian lampu Philips Anda untuk mengikuti undian Philips Play&Win. Upload invoice Anda dengan klik link " + a + ' atau Anda dapat meng-upload invoice tersebut nanti melalui button link pada email "Hadiah Langsung Voucher Grab Program Philips Play&Win" yang telah dikirim ke email Anda. <br>' + o }) } else "Voucher Akan Dikirimkan ke Email Anda" == e.error.message ? Swal.fire({ icon: "success", text: e.error.message }) : Swal.fire({ icon: "error", text: e.error.message }) })) } } $(document).ready((function () { window.Parsley.addValidator("captchaValidation", { validateString: function (e) { if (!(e.length > 0)) return !1 }, messages: { en: "Mohon konfirmasi bahwa Anda bukan robot." } }), localStorage.clear(); $("meta[name='base-url']").attr("content"); const e = new Date; var t = e.getFullYear() + "-" + (e.getMonth() + 1) + "-" + e.getDate() + " " + (e.getHours() + ":" + e.getMinutes() + ":" + e.getSeconds()); localStorage.setItem("check_in1", t), $("#form-step").parsley(), $("#form-cek-kode").parsley(); var a = document.getElementById("name"), o = document.getElementById("phone"), n = document.getElementById("email"), l = document.getElementById("store-code"); a.onpaste = e => e.preventDefault(), o.onpaste = e => e.preventDefault(), n.onpaste = e => e.preventDefault(), l.onpaste = e => e.preventDefault(), document.addEventListener("contextmenu", (e => e.preventDefault())), document.onkeydown = function (e) { return (!e.ctrlKey || 67 !== e.keyCode && 86 !== e.keyCode && 85 !== e.keyCode && 117 !== e.keyCode) && !(e.ctrlKey && e.shiftKey && 73 == e.keyCode || e.ctrlKey && e.shiftKey && 74 == e.keyCode) } })), $("#btnStep1").click((function () { $("meta[name='base-url']").attr("content"); document.getElementById("step1").className = "step", document.getElementById("step2").className = "step active"; const e = new Date; var t = e.getFullYear() + "-" + (e.getMonth() + 1) + "-" + e.getDate() + " " + (e.getHours() + ":" + e.getMinutes() + ":" + e.getSeconds()); localStorage.setItem("check_out1", t), localStorage.setItem("check_in2", t), window.scrollTo(0, 0) })), $("#btnStep2").click((function () { var e, t, a, o; const n = $("meta[name='base-url']").attr("content"); Swal.fire({ text: "Memuat..", allowOutsideClick: !1, onBeforeOpen: () => { Swal.showLoading() } }); var l = [], c = [], r = {}, s = document.getElementById("totalQuestion").value, u = document.getElementById("step2").getElementsByTagName("input"); for (i = 0; i < u.length; i++)(u[i].type = "radio") && u[i].checked && (e = u[i].value, l.push(e)); l.length == s ? (t = { answer: l.join("") }, r.answer = l.join(""), null != (a = localStorage.getItem("quiz")) ? ((o = JSON.parse(a)).push(r), localStorage.setItem("quiz", JSON.stringify(o))) : (c.push(r), localStorage.setItem("quiz", JSON.stringify(c))), $.post(n + "/Home/CheckQuiz", t, (function (e) { if (Swal.hideLoading(), Swal.close(), null != e.message) { const e = new Date; var t = e.getFullYear() + "-" + (e.getMonth() + 1) + "-" + e.getDate(), a = e.getHours() + ":" + e.getMinutes() + ":" + e.getSeconds(), o = t + " " + a; localStorage.setItem("check_out2", o), localStorage.setItem("check_in3", o), Swal.fire({ title: "Selamat!", icon: "success", text: "Selamat Anda telah menjawab semua pertanyaan dengan benar" }).then((() => { document.getElementById("step2").className = "step", document.getElementById("step3").className = "step active", $("[data-toggle='tooltip']").tooltip("show"), window.scrollTo(0, 0) })) } else Swal.fire({ icon: "warning", text: e.error.message }) }))) : (Swal.hideLoading(), Swal.close(), Swal.fire({ icon: "warning", text: "Mohon jawab semua pertanyaan terlebih dahulu" })) })), $("#btnStep3").click((function () { var e; const t = $("meta[name='base-url']").attr("content"); if (e = !0, $("#form-step").each((function () { !0 !== $(this).parsley().validate() && (e = !1) })), e) { var a = grecaptcha.getResponse(), o = { name: document.getElementById("name").value, phone: document.getElementById("phone").value, email: document.getElementById("email").value, storeCode: document.getElementById("store-code").value, info_check_in: localStorage.getItem("check_in1"), info_check_out: localStorage.getItem("check_out1"), quiz_check_in: localStorage.getItem("check_in2"), quiz_check_out: localStorage.getItem("check_out2"), check_in: localStorage.getItem("check_in3"), quiz: localStorage.getItem("quiz"), captcha: a }; Swal.fire({ text: "Memuat..", allowOutsideClick: !1, onBeforeOpen: () => { Swal.showLoading() } }), $.post(t + "/LedActivation/Hit", o, (function (e) { Swal.hideLoading(), Swal.close(), null != e.resource ? $("#modal-otp").show() : "Voucher Akan Dikirimkan ke Email Anda" == e.error.message ? Swal.fire({ icon: "success", text: e.error.message }).then((() => { window.location.reload(!0) })) : Swal.fire({ icon: "error", text: e.error.message }).then((() => { grecaptcha.reset(), $("#g-recaptcha-response").attr("required", !0), $("#g-recaptcha-response").attr("data-parsley-captcha-validation", !0), $("#g-recaptcha-response").attr("data-parsley-error-message", "Mohon konfirmasi bahwa Anda bukan robot.") })) })) } })), $("#close-modal-otp").click((function () { grecaptcha.reset(), $("#g-recaptcha-response").attr("required", !0), $("#g-recaptcha-response").attr("data-parsley-captcha-validation", !0), $("#g-recaptcha-response").attr("data-parsley-error-message", "Mohon konfirmasi bahwa Anda bukan robot."), $("#modal-otp").hide() })), $("#btnCekKode").click((function () { var e, t; const a = $("meta[name='base-url']").attr("content"); e = !0, $("#form-cek-kode").each((function () { !0 !== $(this).parsley().validate() && (e = !1) })), e && (t = { number: document.getElementById("otp").value }, Swal.fire({ text: "Memuat..", allowOutsideClick: !1, onBeforeOpen: () => { Swal.showLoading() } }), $.post(a + "/LedActivation/CheckOTP", t, (function (e) { if (Swal.hideLoading(), Swal.close(), null != e.link) { $("#modal-otp").hide(); var t = e.link, a = "<a href='" + t + "'>berikut</a>", o = "<button type='button' class='swal2-confirm swal2-styled' style='display: inline-block; border-left-color: rgb(202, 0, 160); border-right-color: rgb(202, 0, 160);' onclick='window.location.reload(true);'>OK</button><button type='button' class='swal2-confirm swal2-styled' style='display: inline-block; border-left-color: rgb(202, 0, 160); border-right-color: rgb(202, 0, 160);' onclick='" + ('location.href="' + t + '";') + "'>Upload Invoice</button>"; Swal.fire({ title: "Terima kasih!", icon: "success", showConfirmButton: !1, showCancelButton: !1, html: "Partisipasi Anda pada promo Philips Play&Win telah kami terima. Upload/unggah invoice pembelian lampu Philips Anda untuk mengikuti undian Philips Play&Win. Upload invoice Anda dengan klik link " + a + ' atau Anda dapat meng-upload invoice tersebut nanti melalui button link pada email "Hadiah Langsung Voucher Grab Program Philips Play&Win" yang telah dikirim ke email Anda. <br>' + o }) } else Swal.fire({ icon: "error", text: e.error.message }) }))) })), $("#btnModal").click((function () { $("#modal-otp").show() }));